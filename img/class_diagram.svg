<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="462px" preserveAspectRatio="none" style="width:3425px;height:462px;background:#FFFFFF;" version="1.1" viewBox="0 0 3425 462" width="3425px" zoomAndPan="magnify"><defs/><g><!--MD5=[bea5b0d46523efab5ea1c1d339f396f0]
class Message--><g id="elem_Message"><rect codeLine="7" fill="#F1F1F1" height="178.375" id="Message" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="445" x="1652" y="7"/><ellipse cx="1838.75" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1838.8594,18.3438 L1837.7031,23.4219 L1840.0313,23.4219 L1838.8594,18.3438 Z M1837.375,16.1094 L1840.3594,16.1094 L1843.7188,28.5 L1841.2656,28.5 L1840.5,25.4375 L1837.2188,25.4375 L1836.4688,28.5 L1834.0313,28.5 L1837.375,16.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63" x="1859.25" y="27.8467">Message</text><line style="stroke:#181818;stroke-width:0.5;" x1="1653" x2="2096" y1="39" y2="39"/><ellipse cx="1663" cy="52.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="189" x="1672" y="55.9951">Type : MessageType «get»</text><ellipse cx="1663" cy="68.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="1672" y="72.292">MessageId : int «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="1653" x2="2096" y1="79.5938" y2="79.5938"/><polygon fill="#FFFF44" points="1663,88.2422,1667,92.2422,1663,96.2422,1659,92.2422" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="1672" y="96.5889">WriteNullTerminated(writer : BinaryWriter, value : string) : void</text><ellipse cx="1663" cy="109.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290" x="1672" y="112.8857">«virtual» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="1663" cy="125.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="1672" y="129.1826">«virtual» GetBytesForUdpPacket() : byte[]</text><polygon fill="#FFFF44" points="1663,137.1328,1667,141.1328,1663,145.1328,1659,141.1328" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="287" x="1672" y="145.4795">«static» IsValidUsername(u : string) : bool</text><polygon fill="#FFFF44" points="1663,153.4297,1667,157.4297,1663,161.4297,1659,157.4297" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="1672" y="161.7764">«static» IsValidSecret(s : string) : bool</text><polygon fill="#FFFF44" points="1663,169.7266,1667,173.7266,1663,177.7266,1659,173.7266" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="305" x="1672" y="178.0732">«static» IsValidDisplayName(d : string) : bool</text></g><!--MD5=[3040e785e0b08b0a380be4bc4f92bccf]
class AuthMessage--><g id="elem_AuthMessage"><rect codeLine="19" fill="#F1F1F1" height="210.9688" id="AuthMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="451" x="7" y="245"/><ellipse cx="180.75" cy="261" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M183.7188,266.6406 Q183.1406,266.9375 182.5,267.0781 Q181.8594,267.2344 181.1563,267.2344 Q178.6563,267.2344 177.3281,265.5938 Q176.0156,263.9375 176.0156,260.8125 Q176.0156,257.6875 177.3281,256.0313 Q178.6563,254.375 181.1563,254.375 Q181.8594,254.375 182.5,254.5313 Q183.1563,254.6875 183.7188,254.9844 L183.7188,257.7031 Q183.0938,257.125 182.5,256.8594 Q181.9063,256.5781 181.2813,256.5781 Q179.9375,256.5781 179.25,257.6563 Q178.5625,258.7188 178.5625,260.8125 Q178.5625,262.9063 179.25,263.9844 Q179.9375,265.0469 181.2813,265.0469 Q181.9063,265.0469 182.5,264.7813 Q183.0938,264.5 183.7188,263.9219 L183.7188,266.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="201.25" y="265.8467">AuthMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="457" y1="277" y2="277"/><ellipse cx="18" cy="290.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="27" y="293.9951">«override» Type : MessageType «get»</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="303.9453"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="136" x="27" y="310.292">_username : string?</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="320.2422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="27" y="326.5889">_secret : string?</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="336.5391"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="27" y="342.8857">_displayName : string?</text><ellipse cx="18" cy="355.8359" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="175" x="27" y="359.1826">Username : string? «get»</text><ellipse cx="18" cy="372.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="27" y="375.4795">Secret : string? «get»</text><ellipse cx="18" cy="388.4297" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="193" x="27" y="391.7764">DisplayName : string? «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="457" y1="399.0781" y2="399.0781"/><ellipse cx="18" cy="412.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="27" y="416.0732">«override» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="18" cy="429.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="27" y="432.3701">«override» GetBytesForUdpPacket() : byte[]</text><ellipse cx="18" cy="445.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="425" x="27" y="448.667">«static» ParseAuthMessageArgs(argsString : string) : string[]?</text></g><!--MD5=[db6763ca53073e824c5de61e57b37105]
class ByeMessage--><g id="elem_ByeMessage"><rect codeLine="32" fill="#F1F1F1" height="113.1875" id="ByeMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="332" x="493.5" y="294"/><ellipse cx="610.75" cy="310" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M613.7188,315.6406 Q613.1406,315.9375 612.5,316.0781 Q611.8594,316.2344 611.1563,316.2344 Q608.6563,316.2344 607.3281,314.5938 Q606.0156,312.9375 606.0156,309.8125 Q606.0156,306.6875 607.3281,305.0313 Q608.6563,303.375 611.1563,303.375 Q611.8594,303.375 612.5,303.5313 Q613.1563,303.6875 613.7188,303.9844 L613.7188,306.7031 Q613.0938,306.125 612.5,305.8594 Q611.9063,305.5781 611.2813,305.5781 Q609.9375,305.5781 609.25,306.6563 Q608.5625,307.7188 608.5625,309.8125 Q608.5625,311.9063 609.25,312.9844 Q609.9375,314.0469 611.2813,314.0469 Q611.9063,314.0469 612.5,313.7813 Q613.0938,313.5 613.7188,312.9219 L613.7188,315.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="631.25" y="314.8467">ByeMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="494.5" x2="824.5" y1="326" y2="326"/><ellipse cx="504.5" cy="339.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="513.5" y="342.9951">«override» Type : MessageType «get»</text><ellipse cx="504.5" cy="355.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="513.5" y="359.292">DisplayName : string «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="494.5" x2="824.5" y1="366.5938" y2="366.5938"/><ellipse cx="504.5" cy="380.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="513.5" y="383.5889">«override» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="504.5" cy="396.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="513.5" y="399.8857">«override» GetBytesForUdpPacket() : byte[]</text></g><!--MD5=[6607c57a8d0ad95f889fa05007c742a1]
class ConfirmMessage--><g id="elem_ConfirmMessage"><rect codeLine="39" fill="#F1F1F1" height="96.8906" id="ConfirmMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="861" y="302"/><ellipse cx="993.25" cy="318" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M996.2188,323.6406 Q995.6406,323.9375 995,324.0781 Q994.3594,324.2344 993.6563,324.2344 Q991.1563,324.2344 989.8281,322.5938 Q988.5156,320.9375 988.5156,317.8125 Q988.5156,314.6875 989.8281,313.0313 Q991.1563,311.375 993.6563,311.375 Q994.3594,311.375 995,311.5313 Q995.6563,311.6875 996.2188,311.9844 L996.2188,314.7031 Q995.5938,314.125 995,313.8594 Q994.4063,313.5781 993.7813,313.5781 Q992.4375,313.5781 991.75,314.6563 Q991.0625,315.7188 991.0625,317.8125 Q991.0625,319.9063 991.75,320.9844 Q992.4375,322.0469 993.7813,322.0469 Q994.4063,322.0469 995,321.7813 Q995.5938,321.5 996.2188,320.9219 L996.2188,323.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="1013.75" y="322.8467">ConfirmMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="862" x2="1249" y1="334" y2="334"/><ellipse cx="872" cy="347.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="881" y="350.9951">«override» Type : MessageType «get»</text><ellipse cx="872" cy="363.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="363" x="881" y="367.292">typeOfMessageWasConfirmed : MessageType «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="862" x2="1249" y1="374.5938" y2="374.5938"/><ellipse cx="872" cy="388.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="881" y="391.5889">«override» GetBytesForUdpPacket() : byte[]</text></g><!--MD5=[92d27c532e1959ffa4fe390036cf0075]
class ErrMessage--><g id="elem_ErrMessage"><rect codeLine="45" fill="#F1F1F1" height="129.4844" id="ErrMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="332" x="1285.5" y="286"/><ellipse cx="1406.25" cy="302" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1409.2188,307.6406 Q1408.6406,307.9375 1408,308.0781 Q1407.3594,308.2344 1406.6563,308.2344 Q1404.1563,308.2344 1402.8281,306.5938 Q1401.5156,304.9375 1401.5156,301.8125 Q1401.5156,298.6875 1402.8281,297.0313 Q1404.1563,295.375 1406.6563,295.375 Q1407.3594,295.375 1408,295.5313 Q1408.6563,295.6875 1409.2188,295.9844 L1409.2188,298.7031 Q1408.5938,298.125 1408,297.8594 Q1407.4063,297.5781 1406.7813,297.5781 Q1405.4375,297.5781 1404.75,298.6563 Q1404.0625,299.7188 1404.0625,301.8125 Q1404.0625,303.9063 1404.75,304.9844 Q1405.4375,306.0469 1406.7813,306.0469 Q1407.4063,306.0469 1408,305.7813 Q1408.5938,305.5 1409.2188,304.9219 L1409.2188,307.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="1426.75" y="306.8467">ErrMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="1286.5" x2="1616.5" y1="318" y2="318"/><ellipse cx="1296.5" cy="331.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="1305.5" y="334.9951">«override» Type : MessageType «get»</text><ellipse cx="1296.5" cy="347.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="1305.5" y="351.292">DisplayName : string «get»</text><ellipse cx="1296.5" cy="364.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1305.5" y="367.5889">MessageContent : string «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="1286.5" x2="1616.5" y1="374.8906" y2="374.8906"/><ellipse cx="1296.5" cy="388.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="1305.5" y="391.8857">«override» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="1296.5" cy="404.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1305.5" y="408.1826">«override» GetBytesForUdpPacket() : byte[]</text></g><!--MD5=[59f03b100459210ceb1c350609aa7f11]
class JoinMessage--><g id="elem_JoinMessage"><rect codeLine="53" fill="#F1F1F1" height="145.7813" id="JoinMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="443" x="1653" y="277.5"/><ellipse cx="1826.75" cy="293.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1829.7188,299.1406 Q1829.1406,299.4375 1828.5,299.5781 Q1827.8594,299.7344 1827.1563,299.7344 Q1824.6563,299.7344 1823.3281,298.0938 Q1822.0156,296.4375 1822.0156,293.3125 Q1822.0156,290.1875 1823.3281,288.5313 Q1824.6563,286.875 1827.1563,286.875 Q1827.8594,286.875 1828.5,287.0313 Q1829.1563,287.1875 1829.7188,287.4844 L1829.7188,290.2031 Q1829.0938,289.625 1828.5,289.3594 Q1827.9063,289.0781 1827.2813,289.0781 Q1825.9375,289.0781 1825.25,290.1563 Q1824.5625,291.2188 1824.5625,293.3125 Q1824.5625,295.4063 1825.25,296.4844 Q1825.9375,297.5469 1827.2813,297.5469 Q1827.9063,297.5469 1828.5,297.2813 Q1829.0938,297 1829.7188,296.4219 L1829.7188,299.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="1847.25" y="298.3467">JoinMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="1654" x2="2095" y1="309.5" y2="309.5"/><ellipse cx="1664" cy="323.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="1673" y="326.4951">«override» Type : MessageType «get»</text><ellipse cx="1664" cy="339.4453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="1673" y="342.792">ChannelID : string «get»</text><ellipse cx="1664" cy="355.7422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="1673" y="359.0889">DisplayName : string «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="1654" x2="2095" y1="366.3906" y2="366.3906"/><ellipse cx="1664" cy="380.0391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="1673" y="383.3857">«override» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="1664" cy="396.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="1673" y="399.6826">«override» GetBytesForUdpPacket() : byte[]</text><ellipse cx="1664" cy="412.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="417" x="1673" y="415.9795">«static» ParseJoinMessageArgs(argsString : string) : string[]?</text></g><!--MD5=[fd1ede5b0c140ac715e7b163b5c3f7f9]
class MsgMessage--><g id="elem_MsgMessage"><rect codeLine="62" fill="#F1F1F1" height="145.7813" id="MsgMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="332" x="2131.5" y="277.5"/><ellipse cx="2247.25" cy="293.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2250.2188,299.1406 Q2249.6406,299.4375 2249,299.5781 Q2248.3594,299.7344 2247.6563,299.7344 Q2245.1563,299.7344 2243.8281,298.0938 Q2242.5156,296.4375 2242.5156,293.3125 Q2242.5156,290.1875 2243.8281,288.5313 Q2245.1563,286.875 2247.6563,286.875 Q2248.3594,286.875 2249,287.0313 Q2249.6563,287.1875 2250.2188,287.4844 L2250.2188,290.2031 Q2249.5938,289.625 2249,289.3594 Q2248.4063,289.0781 2247.7813,289.0781 Q2246.4375,289.0781 2245.75,290.1563 Q2245.0625,291.2188 2245.0625,293.3125 Q2245.0625,295.4063 2245.75,296.4844 Q2246.4375,297.5469 2247.7813,297.5469 Q2248.4063,297.5469 2249,297.2813 Q2249.5938,297 2250.2188,296.4219 L2250.2188,299.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="2267.75" y="298.3467">MsgMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="2132.5" x2="2462.5" y1="309.5" y2="309.5"/><ellipse cx="2142.5" cy="323.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="2151.5" y="326.4951">«override» Type : MessageType «get»</text><ellipse cx="2142.5" cy="339.4453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186" x="2151.5" y="342.792">DisplayName : string «get»</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="2139.5" y="352.7422"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="2151.5" y="359.0889">_messageContent : string</text><ellipse cx="2142.5" cy="372.0391" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="2151.5" y="375.3857">MessageContent : string «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="2132.5" x2="2462.5" y1="382.6875" y2="382.6875"/><ellipse cx="2142.5" cy="396.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="306" x="2151.5" y="399.6826">«override» GetBytesInTcpGrammar() : byte[]</text><ellipse cx="2142.5" cy="412.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="302" x="2151.5" y="415.9795">«override» GetBytesForUdpPacket() : byte[]</text></g><!--MD5=[85beb7b4b86b7942b13d29a5087abeba]
class PingMessage--><g id="elem_PingMessage"><rect codeLine="71" fill="#F1F1F1" height="64.2969" id="PingMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="293" x="2499" y="318.5"/><ellipse cx="2594.75" cy="334.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2597.7188,340.1406 Q2597.1406,340.4375 2596.5,340.5781 Q2595.8594,340.7344 2595.1563,340.7344 Q2592.6563,340.7344 2591.3281,339.0938 Q2590.0156,337.4375 2590.0156,334.3125 Q2590.0156,331.1875 2591.3281,329.5313 Q2592.6563,327.875 2595.1563,327.875 Q2595.8594,327.875 2596.5,328.0313 Q2597.1563,328.1875 2597.7188,328.4844 L2597.7188,331.2031 Q2597.0938,330.625 2596.5,330.3594 Q2595.9063,330.0781 2595.2813,330.0781 Q2593.9375,330.0781 2593.25,331.1563 Q2592.5625,332.2188 2592.5625,334.3125 Q2592.5625,336.4063 2593.25,337.4844 Q2593.9375,338.5469 2595.2813,338.5469 Q2595.9063,338.5469 2596.5,338.2813 Q2597.0938,338 2597.7188,337.4219 L2597.7188,340.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="2615.25" y="339.3467">PingMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="2500" x2="2791" y1="350.5" y2="350.5"/><ellipse cx="2510" cy="364.1484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="2519" y="367.4951">«override» Type : MessageType «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="2500" x2="2791" y1="374.7969" y2="374.7969"/></g><!--MD5=[6dc2e50c4226ed7a5875b4bc27816595]
class ReplyAuthMessage--><g id="elem_ReplyAuthMessage"><rect codeLine="75" fill="#F1F1F1" height="113.1875" id="ReplyAuthMessage" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="426" x="2827.5" y="294"/><ellipse cx="2969.75" cy="310" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M2972.7188,315.6406 Q2972.1406,315.9375 2971.5,316.0781 Q2970.8594,316.2344 2970.1563,316.2344 Q2967.6563,316.2344 2966.3281,314.5938 Q2965.0156,312.9375 2965.0156,309.8125 Q2965.0156,306.6875 2966.3281,305.0313 Q2967.6563,303.375 2970.1563,303.375 Q2970.8594,303.375 2971.5,303.5313 Q2972.1563,303.6875 2972.7188,303.9844 L2972.7188,306.7031 Q2972.0938,306.125 2971.5,305.8594 Q2970.9063,305.5781 2970.2813,305.5781 Q2968.9375,305.5781 2968.25,306.6563 Q2967.5625,307.7188 2967.5625,309.8125 Q2967.5625,311.9063 2968.25,312.9844 Q2968.9375,314.0469 2970.2813,314.0469 Q2970.9063,314.0469 2971.5,313.7813 Q2972.0938,313.5 2972.7188,312.9219 L2972.7188,315.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="2990.25" y="314.8467">ReplyAuthMessage</text><line style="stroke:#181818;stroke-width:0.5;" x1="2828.5" x2="3252.5" y1="326" y2="326"/><ellipse cx="2838.5" cy="339.6484" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="267" x="2847.5" y="342.9951">«override» Type : MessageType «get»</text><ellipse cx="2838.5" cy="355.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="2847.5" y="359.292">IsSuccess : bool «get»</text><ellipse cx="2838.5" cy="372.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="2847.5" y="375.5889">MessageContent : string «get»</text><line style="stroke:#181818;stroke-width:0.5;" x1="2828.5" x2="3252.5" y1="382.8906" y2="382.8906"/><ellipse cx="2838.5" cy="396.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="400" x="2847.5" y="399.8857">«override» GetBytesInTcpGrammar() : byte[] ' Returns null</text></g><!--MD5=[3f1455d39c1553e9a1d8b93de3131e53]
class MessageType--><g id="elem_MessageType"><rect codeLine="83" fill="#F1F1F1" height="178.375" id="MessageType" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="129" x="3289" y="261.5"/><ellipse cx="3304" cy="277.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M3308.1094,283.5 L3300.3906,283.5 L3300.3906,271.1094 L3308.1094,271.1094 L3308.1094,273.2656 L3302.8438,273.2656 L3302.8438,275.9375 L3307.6094,275.9375 L3307.6094,278.0938 L3302.8438,278.0938 L3302.8438,281.3438 L3308.1094,281.3438 L3308.1094,283.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="3318" y="282.3467">MessageType</text><line style="stroke:#181818;stroke-width:0.5;" x1="3290" x2="3417" y1="293.5" y2="293.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="3295" y="310.4951">CONFIRM</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="3295" y="326.792">REPLY</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="3295" y="343.0889">AUTH</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="3295" y="359.3857">JOIN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="3295" y="375.6826">MSG</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="3295" y="391.9795">PING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="3295" y="408.2764">ERR</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="3295" y="424.5732">BYE</text><line style="stroke:#181818;stroke-width:0.5;" x1="3290" x2="3417" y1="431.875" y2="431.875"/></g><!--MD5=[d61d684950ace520baceaf5cd8faa9d2]
reverse link Message to AuthMessage--><g id="link_Message_AuthMessage"><path d="M1631.44,100.69 C1349.22,110.01 871.77,141.38 475.5,245 C469.72,246.51 463.91,248.14 458.07,249.86 " fill="none" id="Message-backto-AuthMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1631.62,93.68,1651.83,100.05,1632.07,107.68,1631.62,93.68" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[d1c0cf81536850b4e84ad98aa408eb46]
reverse link Message to ByeMessage--><g id="link_Message_ByeMessage"><path d="M1631.7,106.35 C1418.91,120.48 1103.83,155.96 843.5,245 C808.57,256.95 772.7,275.62 742.02,293.9 " fill="none" id="Message-backto-ByeMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1631.56,99.34,1651.96,105.05,1632.45,113.32,1631.56,99.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[87ff6ea726319db2d5db3344790c611e]
reverse link Message to ConfirmMessage--><g id="link_Message_ConfirmMessage"><path d="M1632.23,143.33 C1519.62,168.08 1384.95,202.32 1267.5,245 C1224.69,260.56 1179.15,282.27 1141.29,301.87 " fill="none" id="Message-backto-ConfirmMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1630.88,136.46,1651.91,139.05,1633.85,150.14,1630.88,136.46" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[549c0ee7940e69018eae6016991b38a3]
reverse link Message to ErrMessage--><g id="link_Message_ErrMessage"><path d="M1709.38,195.56 C1658.45,225.97 1603.74,258.62 1557.88,286 " fill="none" id="Message-backto-ErrMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1706.09,189.38,1726.85,185.13,1713.27,201.4,1706.09,189.38" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[85d8d88ad92e4068f7f6c615dec9efa8]
reverse link Message to JoinMessage--><g id="link_Message_JoinMessage"><path d="M1874.5,205.38 C1874.5,229.61 1874.5,254.74 1874.5,277.1 " fill="none" id="Message-backto-JoinMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1867.5,205.31,1874.5,185.31,1881.5,205.31,1867.5,205.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6b29bcddbdc4321d1a00d81361f53584]
reverse link Message to MsgMessage--><g id="link_Message_MsgMessage"><path d="M2039.51,195.5 C2085.24,222.8 2134.02,251.92 2176.72,277.4 " fill="none" id="Message-backto-MsgMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2035.73,201.4,2022.15,185.13,2042.91,189.38,2035.73,201.4" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a9cf697cbad4fcbc181414c0cf3cc46c]
reverse link Message to PingMessage--><g id="link_Message_PingMessage"><path d="M2116.96,137.13 C2230.48,160.66 2365.85,195.66 2481.5,245 C2526.53,264.21 2573.16,295.18 2605.14,318.43 " fill="none" id="Message-backto-PingMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2115.32,143.94,2097.12,133.09,2118.12,130.22,2115.32,143.94" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[404eda5596dbac49e12e4bcaae316354]
reverse link Message to ReplyAuthMessage--><g id="link_Message_ReplyAuthMessage"><path d="M2117.35,117.44 C2308.44,137.8 2579.89,176.25 2809.5,245 C2851.25,257.5 2895.25,275.96 2933.52,293.9 " fill="none" id="Message-backto-ReplyAuthMessage" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="2116.53,124.39,2097.37,115.35,2117.99,110.47,2116.53,124.39" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[65730b0a2dd048c6f84d8f58ec948f70]
link Message to MessageType--><g id="link_Message_MessageType"><path codeLine="93" d="M2097.27,99.75 C2439.38,107.42 3075.18,136.34 3271.5,245 C3278.06,248.63 3284.27,253.02 3290.12,257.92 " fill="none" id="Message-to-MessageType" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="3294.12,261.4,3289.9424,252.4811,3290.343,258.1237,3284.7003,258.5243,3294.12,261.4" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b938859a0bade952890ae6ab569ab276]
@startuml
' ==========================
' === Prvý obrázok: Message ===
' ==========================


' Základná trieda Message
abstract class Message {
  + {abstract} Type : MessageType <<get>>
  + MessageId : int <<get>>
  # WriteNullTerminated(writer : BinaryWriter, value : string) : void
  + <<virtual>> GetBytesInTcpGrammar() : byte[]
  + <<virtual>> GetBytesForUdpPacket() : byte[]
  # <<static>> IsValidUsername(u : string) : bool
  # <<static>> IsValidSecret(s : string) : bool
  # <<static>> IsValidDisplayName(d : string) : bool
}

' Triedy dediace z Message
class AuthMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  - _username : string?
  - _secret : string?
  - _displayName : string?
  + Username : string? <<get>>
  + Secret : string? <<get>>
  + DisplayName : string? <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
  + <<static>> ParseAuthMessageArgs(argsString : string) : string[]?
}

class ByeMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class ConfirmMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + typeOfMessageWasConfirmed : MessageType <<get>>
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class ErrMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class JoinMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + ChannelID : string <<get>>
  + DisplayName : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
  + <<static>> ParseJoinMessageArgs(argsString : string) : string[]?
}

class MsgMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  - _messageContent : string
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class PingMessage extends Message {
  + <<override>> Type : MessageType <<get>>
}

class ReplyAuthMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + IsSuccess : bool <<get>>
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[] ' Returns null
}

' Enum pre Message
enum MessageType {
  CONFIRM
  REPLY
  AUTH
  JOIN
  MSG
  PING
  ERR
  BYE
}
Message - -> MessageType

' === Kľúčové slovo pre nový obrázok ===
newpage
' =====================================

' =============================
' === Druhý obrázok: ChatClient ===
' =============================

title ChatClient Class Hierarchy

' Základná trieda ChatClient
class ChatClient {
  # _server : IPAddress
  # _port : ushort
  # _stateLock : object
  # _currentState : ClientState
  + DisplayName : string <<get>> <<set>>
  + CurrentState : ClientState <<get>> <<set>>
  + Server : string <<get>>
  + PrintHelp() : void
}

' Triedy dediace z ChatClient
class TcpChatClient extends ChatClient {
  - _client : TcpClient?
  - _stream : NetworkStream?
  + Start() : Task
  + DisconnectAsync(reason : string) : Task
  + Console_CancelKeyPress(sender : object?, e : ConsoleCancelEventArgs) : void
}

class UdpChatClient extends ChatClient {
  + <<static>> _pendingConfirmationMessages : Dictionary<int, UdpSentMessageInfo>
  + <<static>> alreadyConfirmedIds : HashSet<int>
  - _timeoutMs : ushort
  - _maxRetries : byte
  - _socket : Socket?
  - _isAuthenticated : bool
  - _dynamicServerEndPoint : IPEndPoint?
  + RunAsync() : Task
  - WaitConfirm(message : Message, payload : byte[]) : void
  - SendUdpPayloadToServer(payload : byte[], isConfirmation : bool) : bool
  - ReceiveLoopAsync(token : CancellationToken) : Task
  - DisconnectAsync(reason : string, exitCode : int) : Task
  + Console_CancelKeyPress(sender : object?, e : ConsoleCancelEventArgs) : void
}

' Enum pre ChatClient
enum ClientState {
  Start
  Auth
  Join
  Open
  End
}
ChatClient - -> ClientState
@enduml

@startuml


abstract class Message {
  + {abstract} Type : MessageType <<get>>
  + MessageId : int <<get>>
  # WriteNullTerminated(writer : BinaryWriter, value : string) : void
  + <<virtual>> GetBytesInTcpGrammar() : byte[]
  + <<virtual>> GetBytesForUdpPacket() : byte[]
  # <<static>> IsValidUsername(u : string) : bool
  # <<static>> IsValidSecret(s : string) : bool
  # <<static>> IsValidDisplayName(d : string) : bool
}

class AuthMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  - _username : string?
  - _secret : string?
  - _displayName : string?
  + Username : string? <<get>>
  + Secret : string? <<get>>
  + DisplayName : string? <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
  + <<static>> ParseAuthMessageArgs(argsString : string) : string[]?
}

class ByeMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class ConfirmMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + typeOfMessageWasConfirmed : MessageType <<get>>
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class ErrMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class JoinMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + ChannelID : string <<get>>
  + DisplayName : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
  + <<static>> ParseJoinMessageArgs(argsString : string) : string[]?
}

class MsgMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + DisplayName : string <<get>>
  - _messageContent : string
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[]
  + <<override>> GetBytesForUdpPacket() : byte[]
}

class PingMessage extends Message {
  + <<override>> Type : MessageType <<get>>
}

class ReplyAuthMessage extends Message {
  + <<override>> Type : MessageType <<get>>
  + IsSuccess : bool <<get>>
  + MessageContent : string <<get>>
  + <<override>> GetBytesInTcpGrammar() : byte[] ' Returns null
}

enum MessageType {
  CONFIRM
  REPLY
  AUTH
  JOIN
  MSG
  PING
  ERR
  BYE
}
Message - -> MessageType

newpage


title ChatClient Class Hierarchy

class ChatClient {
  # _server : IPAddress
  # _port : ushort
  # _stateLock : object
  # _currentState : ClientState
  + DisplayName : string <<get>> <<set>>
  + CurrentState : ClientState <<get>> <<set>>
  + Server : string <<get>>
  + PrintHelp() : void
}

class TcpChatClient extends ChatClient {
  - _client : TcpClient?
  - _stream : NetworkStream?
  + Start() : Task
  + DisconnectAsync(reason : string) : Task
  + Console_CancelKeyPress(sender : object?, e : ConsoleCancelEventArgs) : void
}

class UdpChatClient extends ChatClient {
  + <<static>> _pendingConfirmationMessages : Dictionary<int, UdpSentMessageInfo>
  + <<static>> alreadyConfirmedIds : HashSet<int>
  - _timeoutMs : ushort
  - _maxRetries : byte
  - _socket : Socket?
  - _isAuthenticated : bool
  - _dynamicServerEndPoint : IPEndPoint?
  + RunAsync() : Task
  - WaitConfirm(message : Message, payload : byte[]) : void
  - SendUdpPayloadToServer(payload : byte[], isConfirmation : bool) : bool
  - ReceiveLoopAsync(token : CancellationToken) : Task
  - DisconnectAsync(reason : string, exitCode : int) : Task
  + Console_CancelKeyPress(sender : object?, e : ConsoleCancelEventArgs) : void
}

enum ClientState {
  Start
  Auth
  Join
  Open
  End
}
ChatClient - -> ClientState
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>